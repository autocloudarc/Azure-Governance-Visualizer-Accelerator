{
  "identity": {
    "type": "None"
  },
  "properties": {
    "displayName": "Do not allow deletion of the User Assigned Managed Identity used by AMA",
    "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/alz/providers/Microsoft.Authorization/policyDefinitions/DenyAction-DeleteResources",
    "scope": "/providers/Microsoft.Management/managementGroups/platform",
    "notScopes": [],
    "parameters": {
      "effect": {
        "value": "DenyAction"
      },
      "resourceName": {
        "value": "alz-uami"
      },
      "resourceType": {
        "value": "Microsoft.ManagedIdentity/userAssignedIdentities"
      }
    },
    "description": "This policy provides a safeguard against accidental removal of the User Assigned Managed Identity used by AMA by blocking delete calls using deny action effect.",
    "metadata": {
      "createdBy": "bbd0bbbd-16fc-4c39-a530-65ced78b7590",
      "createdOn": "2026-01-21T00:37:31.8924991Z",
      "updatedBy": null,
      "updatedOn": null
    },
    "enforcementMode": "Default",
    "nonComplianceMessages": [
      {
        "message": "This resource must be compliant with the assigned policy."
      }
    ]
  },
  "id": "/providers/Microsoft.Management/managementGroups/platform/providers/Microsoft.Authorization/policyAssignments/DenyAction-DeleteUAMIAMA",
  "type": "Microsoft.Authorization/policyAssignments",
  "name": "DenyAction-DeleteUAMIAMA",
  "location": "eastus2",
  "systemData": {
    "createdBy": "2fb557e8-a7b2-4828-b19d-b2ddee966115",
    "createdByType": "Application",
    "createdAt": "2026-01-21T00:37:31.7385037Z",
    "lastModifiedBy": "2fb557e8-a7b2-4828-b19d-b2ddee966115",
    "lastModifiedByType": "Application",
    "lastModifiedAt": "2026-01-21T00:37:31.7385037Z"
  }
}
